<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>World Map</title>
    <style>
        .country {
            fill: #cccccc;
            stroke: #ffffff;
            stroke-width: 0.5;
        }
    </style>
</head>
<body>
    <div id="chart"></div>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <script>
        // Initializes all elements and draws the graph
        function init() {
            const width = 4000;
            const height = 2000;
            const svg = d3.select('#chart').append('svg').attr('width', width).attr('height', height);

            // Adjusted projection scale for zoomed out view
            const projection = d3.geoMercator().scale(100).translate([width / 2, height / 2]);
            const path = d3.geoPath(projection);

            // Set up zoom behavior
            const zoom = d3.zoom()
                .scaleExtent([1, 8]) // Limit the zoom scale
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });

            svg.call(zoom);

            // Group for countries
            const g = svg.append('g');

            // Load and render the map data
            d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-10m.json").then(data => {
                const countries = topojson.feature(data, data.objects.countries);
                g.selectAll('path').data(countries.features).enter().append('path')
                    .attr('class', 'country').attr('d', path);
            });
        }

        // Call the init function when window loads
        window.onload = init;
    </script>
</body>
</html>
